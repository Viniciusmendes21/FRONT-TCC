<div class="correcao-container">
  <h2>Correção de Redação por IA (Gemini)</h2>

  <form (ngSubmit)="enviar()" class="correcao-form" autocomplete="off">
    <div class="form-group">
      <label for="tema">Tema</label>
      <input id="tema" type="text" [(ngModel)]="tema" name="tema" required placeholder="Digite o tema da redação" />
    </div>
    <div class="form-group">
      <label for="texto">Texto da Redação</label>
      <textarea id="texto" rows="8" [(ngModel)]="texto" name="texto" required placeholder="Digite seu texto aqui"></textarea>
    </div>
    <button type="submit" [disabled]="!tema || !texto || carregando" class="btn-enviar">
      {{ carregando ? 'Corrigindo...' : 'Enviar para Correção' }}
    </button>
  </form>

  <div *ngIf="erro" class="erro-msg">
    <pre>{{ erro }}</pre>
  </div>

  <div *ngIf="resultado?.success" class="resultado-card">
    <h3>Resultado da Correção</h3>
    <div class="criterio">
      <strong>Coerência e Coesão:</strong>
      <span class="nota">{{ resultado.coerencia_coesao.nota }}/10</span>
      <div class="comentario">{{ resultado.coerencia_coesao.comentarios }}</div>
    </div>
    <div class="criterio">
      <strong>Ortografia e Gramática:</strong>
      <span class="nota">{{ resultado.ortografia_gramatica.nota }}/10</span>
      <div class="comentario">{{ resultado.ortografia_gramatica.comentarios }}</div>
    </div>
    <div class="criterio">
      <strong>Argumentação:</strong>
      <span class="nota">{{ resultado.argumentacao.nota }}/10</span>
      <div class="comentario">{{ resultado.argumentacao.comentarios }}</div>
    </div>
    <div class="criterio">
      <strong>Proposta de Intervenção:</strong>
      <span class="nota">{{ resultado.intervencao.nota }}/10</span>
      <div class="comentario">{{ resultado.intervencao.comentarios }}</div>
    </div>
    <div class="media-geral">
      <strong>Média Geral:</strong>
      <span class="nota-final">{{ resultado.media_geral }}/10</span>
    </div>
  </div>

  <div *ngIf="resultado && !resultado.success" class="erro-msg">
    <strong>Erro:</strong>
    <pre>{{ resultado.message || resultado.error }}</pre>
  </div>
</div>